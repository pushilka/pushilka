function Pushilka(e){var i={endpoint:"https://push.wuazu.net/push_subscription.php",serviceWorker:"/serviceWorker.js",serviceWorkerOptions:{scope:"/"},applicationServerKey:"BCmIwkLHxJNPccoVf2UXDjd7kDuiyJpKsSOqSHCtGBMfBkjfHLCq4-d8eNtabNlCNKFF8CZIzeDwOo3OvNCQAns",source:"",var1:"",var2:"",var3:"",var4:"",done:function(){},success:function(){},decline:function(){}};for(var n in e)e.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(i[n]=e[n]);function r(){navigator.serviceWorker.ready.then(function(e){return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(n),t=new Uint8Array(r.length),o=0;o<r.length;++o)t[o]=r.charCodeAt(o);return t}(i.applicationServerKey)})}).then(function(e){return t(e,"POST")}).catch(function(){i.decline()})}function t(e,n){var r=e.getKey("p256dh"),t=e.getKey("auth"),o=(PushManager.supportedContentEncodings||["aesgcm"])[0];return fetch(i.endpoint+"?s="+encodeURIComponent(i.source.toString())+"&var1="+encodeURIComponent(i.var1.toString())+"&var2="+encodeURIComponent(i.var2.toString())+"&var3="+encodeURIComponent(i.var3.toString())+"&var4="+encodeURIComponent(i.var4.toString())+"&key="+encodeURIComponent(i.applicationServerKey.toString()),{method:n,body:JSON.stringify({endpoint:e.endpoint,publicKey:r?btoa(String.fromCharCode.apply(null,new Uint8Array(r))):null,authToken:t?btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,contentEncoding:o})}).then(function(){return i.done(),i.success(),e}).catch(function(){i.done(),i.success()})}this.ready=function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)},this.run=function(){this.ready(function(){navigator.serviceWorker.register(i.serviceWorker,i.serviceWorkerOptions),navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription()}).then(function(e){return e?t(e,"PUT"):r()})})}}